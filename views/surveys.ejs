<!DOCTYPE html>
<html lang="en">
<head><!-- Title -->
    <title>Program Feedback - Ella Rises</title>
    <%- include('partials/head') %> <!-- HEader -->
    <style>
        /* --- RATING CIRCLES --- */
        .rating-group {
            display: flex;
            justify-content: center;
            gap: 15px; /* Space between circles */
            margin-top: 10px;
            margin-bottom: 10px;
        }
        
        /* Hide the actual radio buttons */
        .rating-input { display: none; }

        /* The Circle Label */
        .rating-label {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: #fff;
            border: 2px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--er-charcoal);
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Bouncy effect */
            font-size: 1.1rem;
        }

        /* Hover State */
        .rating-label:hover {
            border-color: var(--er-primary);
            color: var(--er-primary);
            transform: translateY(-3px);
        }

        /* Selected State */
        .rating-input:checked + .rating-label {
            background-color: var(--er-primary); /* Brand Pink */
            border-color: var(--er-primary);
            color: white;
            transform: scale(1.15);
            box-shadow: 0 4px 10px rgba(249, 175, 177, 0.5);
        }

        /* Card Styling */
        .feedback-card {
            border: none;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }
        
        .section-title {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #adb5bd;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-align: center;
            position: relative;
        }
        
        /* Decorative line behind text */
        .section-title::before {
            content: "";
            position: absolute;
            left: 0; top: 50%;
            width: 100%;
            height: 1px;
            background: #f0f0f0;
            z-index: 0;
        }
        .section-title span {
            background: #fff;
            padding: 0 15px;
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body class="bg-light">
<!-- Header -->
    <%- include('partials/header') %>

    <div class="container mt-5 mb-5" style="max-width: 750px;">
        
        <div class="text-center mb-4">
            <h1 class="fw-bold text-primary" style="font-family: 'DM Serif Display', serif;">We Value Your Voice</h1>
            <p class="text-muted">Help us improve Ella Rises for future participants.</p>
        </div>

        <div class="card feedback-card">
            <div class="card-header bg-primary text-white py-3 text-center" style="background-color: var(--er-sage) !important;">
                <h5 class="mb-0 fw-bold"><i class="bi bi-chat-square-heart-fill me-2"></i> Event Feedback Survey</h5>
            </div>

            <div class="card-body p-4 p-md-5">
                <!-- Survey submit route-->
                <form action="/survey/submit" method="POST">

                    <div class="mb-5">
                        <label for="registrationId" class="form-label fw-bold text-dark">Which event are you reviewing?</label>
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0"><i class="bi bi-calendar-event"></i></span>
                            <select class="form-select border-start-0 ps-0" id="registrationId" name="registrationId" required style="background-color: #f8f9fa;">
                                <option value="" selected disabled>-- Select an event from your history --</option>
                                <% if (events && events.length > 0) { %> <!-- Even tsearch -->
                                    <% events.forEach(e => { %>
                                        <option value="<%= e.registrationid %>">
                                            <%= e.eventname %>
                                        </option>
                                    <% }) %>
                                <% } else { %> <!-- Validation -->
                                    <option disabled>No recent events found.</option>
                                <% } %>
                            </select>
                        </div>
                    </div>

                    <div class="section-title"><span>Experience Ratings</span></div>

                    <div class="mb-5 text-center">
                        <label class="form-label fw-bold d-block mb-2">Overall Satisfaction</label>
                        <div class="d-flex justify-content-center justify-content-md-between px-md-5 small text-muted mb-1" style="max-width: 400px; margin: 0 auto;">
                            <span><i class="bi bi-emoji-frown"></i> Poor</span>
                            <span>Excellent <i class="bi bi-emoji-smile"></i></span>
                        </div>
                        <div class="rating-group">
                            <% for(let i=1; i<=5; i++) { %>
                                <input type="radio" class="rating-input" name="satisfaction" id="sat<%= i %>" value="<%= i %>" required>
                                <label class="rating-label" for="sat<%= i %>"><%= i %></label>
                            <% } %>
                        </div> <!-- Ratings -->
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6 text-center mb-4 mb-md-0">
                            <label class="form-label fw-bold d-block text-secondary small">Content Usefulness</label>
                            <div class="rating-group justify-content-center">
                                <% for(let i=1; i<=5; i++) { %>
                                    <input type="radio" class="rating-input" name="usefulness" id="use<%= i %>" value="<%= i %>" required>
                                    <label class="rating-label" style="width:35px; height:35px; font-size: 0.9rem;" for="use<%= i %>"><%= i %></label>
                                <% } %>
                            </div> <!-- Raintgs -->
                        </div>
                        
                        <div class="col-md-6 text-center">
                            <label class="form-label fw-bold d-block text-secondary small">Instructor Quality</label>
                            <div class="rating-group justify-content-center">
                                <% for(let i=1; i<=5; i++) { %>
                                    <input type="radio" class="rating-input" name="instructor" id="inst<%= i %>" value="<%= i %>" required>
                                    <label class="rating-label" style="width:35px; height:35px; font-size: 0.9rem;" for="inst<%= i %>"><%= i %></label>
                                <% } %>
                            </div> <!-- Ratings-->
                        </div>
                    </div>

                    <div class="section-title mt-5"><span>Recommendation</span></div>

                    <div class="mb-5 text-center">
                        <label class="form-label fw-bold d-block">How likely are you to recommend us?</label>
                        <div class="d-flex justify-content-center justify-content-md-between px-md-5 small text-muted mb-1" style="max-width: 400px; margin: 0 auto;">
                            <span>Not Likely</span>
                            <span>Very Likely</span>
                        </div>
                        
                        <div class="rating-group">
                            <% for(let i=1; i<=5; i++) { %>
                                <input type="radio" class="rating-input" name="recommendation" id="rec<%= i %>" value="<%= i %>" required>
                                <label class="rating-label" for="rec<%= i %>"><%= i %></label>
                            <% } %>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label for="comments" class="form-label fw-bold">Additional Comments</label>
                        <textarea class="form-control bg-light" id="comments" name="comments" rows="4" placeholder="What did you enjoy? What can we improve?"></textarea>
                    </div>

                    <div class="d-grid mt-5">
                        <button type="submit" class="btn btn-primary btn-lg shadow-sm">Submit Feedback</button>
                    </div>

                </form>
            </div>
        </div>
    </div>
 <!-- footer -->
    <%- include('partials/footer') %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>