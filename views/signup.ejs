<!DOCTYPE html>
<html lang="en">
<head> <!-- Title -->
  <title>Sign Up - Ella</title>
  <%- include('partials/head') %>
</head> <!-- HEader -->
<body>
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container"> <!-- NAv route -->
      <a class="navbar-brand" href="/">Ella</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li> <!-- More nav routes -->
          <li class="nav-item">
            <a class="nav-link" href="/login">Login</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container my-5">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        <div class="card shadow-lg border-0">
          
          <div class="card-header text-center bg-white py-4 border-bottom">
            <h2 class="fw-bold text-primary" style="font-family: 'Playfair Display', serif;">Create Your Account</h2>
          </div>
          
          <div class="card-body p-4">
            <% if (typeof error !== 'undefined' && error) { %>
              <div class="alert alert-danger" role="alert">
                <%= error %>
              </div>
            <% } %>
<!-- Signup route and Form -->
            <form action="/signup" method="POST">
              
              <div class="alert alert-light border d-flex align-items-center justify-content-between mb-4">
                  <label class="form-check-label fw-bold m-0" for="isParent">Are you a Parent/Guardian?</label>
                  <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox" id="isParent" name="isParent" style="width: 3em; height: 1.5em; cursor: pointer;">
                  </div>
              </div>

              <h6 class="text-uppercase text-muted fw-bold mb-3 small">Login Details</h6>
              <div class="form-group mb-3">
                <label for="username" class="form-label">Username</label>
                <input id="username" name="username" type="text" class="form-control" required autocomplete="username" 
                       value="<%= typeof username !== 'undefined' ? username : '' %>" />
              </div>

              <div class="form-group mb-4">
                <label for="password" class="form-label">Password</label>
                <input id="password" name="password" type="password" class="form-control" required autocomplete="new-password" />
              </div>

              <h6 class="text-uppercase text-muted fw-bold mb-3 small">Personal Information</h6>
              <div class="row mb-3">
                  <div class="col-6">
                    <label for="firstname" class="form-label">First Name</label>
                    <input id="firstname" name="firstname" type="text" class="form-control" required 
                           value="<%= typeof firstname !== 'undefined' ? firstname : '' %>" />
                  </div>
                  <div class="col-6">
                    <label for="lastname" class="form-label">Last Name</label>
                    <input id="lastname" name="lastname" type="text" class="form-control" required 
                           value="<%= typeof lastname !== 'undefined' ? lastname : '' %>" />
                  </div>
              </div>

              <div class="form-group mb-3">
                <label for="email" class="form-label">Email</label>
                <input id="email" name="email" type="email" class="form-control" required autocomplete="email" 
                       value="<%= typeof email !== 'undefined' ? email : '' %>" />
              </div>

              <div class="form-group mb-3">
                <label for="phone" class="form-label">Phone Number</label>
                <input id="phone" name="phone" type="tel" class="form-control" required 
                       value="<%= typeof phone !== 'undefined' ? phone : '' %>" />
              </div>

              <div class="form-group mb-3">
                <label for="userdob" class="form-label">Date of Birth</label>
                <input id="userdob" name="userdob" type="date" class="form-control" required 
                       value="<%= typeof userdob !== 'undefined' ? userdob : '' %>" />
              </div>

              <div class="row mb-3">
                  <div class="col-md-6">
                    <label for="city" class="form-label">City</label>
                    <input id="city" name="city" type="text" class="form-control" required 
                           value="<%= typeof city !== 'undefined' ? city : '' %>" />
                  </div>
                  <div class="col-md-3">
                    <label for="state" class="form-label">State</label>
                    <input id="state" name="state" type="text" class="form-control" required 
                           value="<%= typeof state !== 'undefined' ? state : '' %>" />
                  </div>
                  <div class="col-md-3">
                    <label for="zip" class="form-label">Zip</label>
                    <input id="zip" name="zip" type="text" class="form-control" required 
                           value="<%= typeof zip !== 'undefined' ? zip : '' %>" />
                  </div>
              </div>

              <div id="studentFields">
                  <hr class="my-4">
                  <h6 class="text-uppercase text-muted fw-bold mb-3 small">Program Details</h6>
                  <div class="mb-3">
                      <label for="school" class="form-label">School or Employer</label>
                      <input id="school" name="school" type="text" class="form-control" placeholder="e.g. UVU" 
                             value="<%= typeof school !== 'undefined' ? school : '' %>">
                  </div>
                  <div class="mb-4">
                      <label for="interest" class="form-label">Field of Interest</label>
                      <input id="interest" name="interest" type="text" class="form-control" placeholder="e.g. Arts, STEM" 
                             value="<%= typeof interest !== 'undefined' ? interest : '' %>">
                  </div>
              </div>
<!-- Other navs-->
              <div class="d-grid gap-2 mt-4">
                <button type="submit" class="btn btn-primary btn-lg">Create Account</button>
                <a href="/login" class="btn btn-outline-secondary">Back to Login</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
<!-- Footer -->
  <%- include('partials/footer') %>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
 <!-- PArent stuff-->
  <script>
      const toggle = document.getElementById('isParent');
      const fields = document.getElementById('studentFields');
      const schoolInput = document.getElementById('school');
      const interestInput = document.getElementById('interest');

      toggle.addEventListener('change', function() {
          if (this.checked) {
              fields.style.display = 'none'; // Hide fields
              schoolInput.required = false;  // Remove required if hidden
              interestInput.required = false;
          } else {
              fields.style.display = 'block'; // Show fields
          }
      });
  </script>
</body>
</html>